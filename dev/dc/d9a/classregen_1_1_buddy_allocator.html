<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>regen: regen::BuddyAllocator Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">regen
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('dc/d9a/classregen_1_1_buddy_allocator.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="../../da/dc6/classregen_1_1_buddy_allocator-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">regen::BuddyAllocator Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Implements a variant of the buddy memory allocation algorithm for virtual memory allocation.  
 <a href="../../dc/d9a/classregen_1_1_buddy_allocator.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="../../d9/da6/memory-allocator_8h_source.html">memory-allocator.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for regen::BuddyAllocator:</div>
<div class="dyncontent">
<div class="center"><img src="../../d3/df2/classregen_1_1_buddy_allocator__coll__graph.png" border="0" usemap="#aregen_1_1_buddy_allocator_coll__map" alt="Collaboration graph"/></div>
<map name="aregen_1_1_buddy_allocator_coll__map" id="aregen_1_1_buddy_allocator_coll__map">
<area shape="rect" title="Implements a variant of the buddy memory allocation algorithm for virtual memory allocation." alt="" coords="5,112,172,137"/>
<area shape="rect" href="../../dc/d83/structregen_1_1_buddy_allocator_1_1_buddy_node.html" title=" " alt="" coords="5,7,172,47"/>
<area shape="poly" title=" " alt="" coords="91,61,91,112,86,112,86,61"/>
<area shape="poly" title=" " alt="" coords="188,18,199,27,191,36,173,39,172,34,188,31,193,27,184,22"/>
</map>
<center><span class="legend">[<a target="top" href="../../graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d83/structregen_1_1_buddy_allocator_1_1_buddy_node.html">BuddyNode</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-types" name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a97157cc161005dcaf678a3b01d86f93b" id="r_a97157cc161005dcaf678a3b01d86f93b"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#a97157cc161005dcaf678a3b01d86f93b">State</a> { <a class="el" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#a97157cc161005dcaf678a3b01d86f93ba97d4280c05c1360e44206f79fd5faf4d">FREE</a>
, <a class="el" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#a97157cc161005dcaf678a3b01d86f93ba22dff73211064bbdda7250aa849d0d2f">FULL</a>
, <a class="el" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#a97157cc161005dcaf678a3b01d86f93baf36f1719c96cf4a0fd72c251cbc56c50">PARTIAL</a>
 }</td></tr>
<tr class="separator:a97157cc161005dcaf678a3b01d86f93b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7692775c92e3dd2ab7d5014ad9d40d70" id="r_a7692775c92e3dd2ab7d5014ad9d40d70"><td class="memItemLeft" align="right" valign="top">typedef unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#a7692775c92e3dd2ab7d5014ad9d40d70">Reference</a></td></tr>
<tr class="memdesc:a7692775c92e3dd2ab7d5014ad9d40d70"><td class="mdescLeft">&#160;</td><td class="mdescRight">the virtual address.  <br /></td></tr>
<tr class="separator:a7692775c92e3dd2ab7d5014ad9d40d70"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a6c188442a57473b0d68c4bd6788095f8" id="r_a6c188442a57473b0d68c4bd6788095f8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#a6c188442a57473b0d68c4bd6788095f8">BuddyAllocator</a> (unsigned int <a class="el" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#a6f006bdad7365abbb441497962f86eaf">size</a>)</td></tr>
<tr class="separator:a6c188442a57473b0d68c4bd6788095f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a607e2bb741be80232456d2cbe9fd4a5a" id="r_a607e2bb741be80232456d2cbe9fd4a5a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#a607e2bb741be80232456d2cbe9fd4a5a">~BuddyAllocator</a> ()</td></tr>
<tr class="separator:a607e2bb741be80232456d2cbe9fd4a5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ca1f1a0ff2c79bb2959d4c548af46f2" id="r_a6ca1f1a0ff2c79bb2959d4c548af46f2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#a97157cc161005dcaf678a3b01d86f93b">State</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#a6ca1f1a0ff2c79bb2959d4c548af46f2">allocaterState</a> () const</td></tr>
<tr class="separator:a6ca1f1a0ff2c79bb2959d4c548af46f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f006bdad7365abbb441497962f86eaf" id="r_a6f006bdad7365abbb441497962f86eaf"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#a6f006bdad7365abbb441497962f86eaf">size</a> () const</td></tr>
<tr class="separator:a6f006bdad7365abbb441497962f86eaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab16567c042f955d0d3d2592f37e6d75c" id="r_ab16567c042f955d0d3d2592f37e6d75c"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#ab16567c042f955d0d3d2592f37e6d75c">maxSpace</a> () const</td></tr>
<tr class="separator:ab16567c042f955d0d3d2592f37e6d75c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00954d101e33b1b53bc623cf1a4bbd31" id="r_a00954d101e33b1b53bc623cf1a4bbd31"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#a00954d101e33b1b53bc623cf1a4bbd31">alloc</a> (unsigned int <a class="el" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#a6f006bdad7365abbb441497962f86eaf">size</a>, unsigned int *addressRet)</td></tr>
<tr class="separator:a00954d101e33b1b53bc623cf1a4bbd31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1059874be41484f7206ae3ec9fdf9682" id="r_a1059874be41484f7206ae3ec9fdf9682"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#a1059874be41484f7206ae3ec9fdf9682">free</a> (unsigned int address)</td></tr>
<tr class="separator:a1059874be41484f7206ae3ec9fdf9682"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a112fe136eaaca51b7fd21d076c8e1322" id="r_a112fe136eaaca51b7fd21d076c8e1322"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#a112fe136eaaca51b7fd21d076c8e1322">clear</a> ()</td></tr>
<tr class="separator:a112fe136eaaca51b7fd21d076c8e1322"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a3ec075603df242150ef9b45b4df3bfce" id="r_a3ec075603df242150ef9b45b4df3bfce"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#a3ec075603df242150ef9b45b4df3bfce">createPartition</a> (<a class="el" href="../../dc/d83/structregen_1_1_buddy_allocator_1_1_buddy_node.html">BuddyNode</a> *n, unsigned int <a class="el" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#a6f006bdad7365abbb441497962f86eaf">size</a>)</td></tr>
<tr class="separator:a3ec075603df242150ef9b45b4df3bfce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4033fd89362bb090a16aa7743f209b5d" id="r_a4033fd89362bb090a16aa7743f209b5d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#a4033fd89362bb090a16aa7743f209b5d">computeMaxSpace</a> (<a class="el" href="../../dc/d83/structregen_1_1_buddy_allocator_1_1_buddy_node.html">BuddyNode</a> *n)</td></tr>
<tr class="separator:a4033fd89362bb090a16aa7743f209b5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87c5b874cf11ba39ebe09f323c566a65" id="r_a87c5b874cf11ba39ebe09f323c566a65"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#a87c5b874cf11ba39ebe09f323c566a65">clear</a> (<a class="el" href="../../dc/d83/structregen_1_1_buddy_allocator_1_1_buddy_node.html">BuddyNode</a> *n)</td></tr>
<tr class="separator:a87c5b874cf11ba39ebe09f323c566a65"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-attribs" name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:aea58740d2c30ab4411f585e6e7c8d5ca" id="r_aea58740d2c30ab4411f585e6e7c8d5ca"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dc/d83/structregen_1_1_buddy_allocator_1_1_buddy_node.html">BuddyNode</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#aea58740d2c30ab4411f585e6e7c8d5ca">buddyTree_</a></td></tr>
<tr class="separator:aea58740d2c30ab4411f585e6e7c8d5ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implements a variant of the buddy memory allocation algorithm for virtual memory allocation. </p>
<p>Dynamic memory allocation is not cheap. GPU memory is precious. For these reasons this class provides memory management with the intention to provide fast <a class="el" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#a00954d101e33b1b53bc623cf1a4bbd31">alloc()</a> and <a class="el" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#a1059874be41484f7206ae3ec9fdf9682">free()</a> functions and keeping the fragmentation in the memory as low as possible without moving any memory.</p>
<p>The algorithm uses a binary tree to partition the pre-allocated memory. When memory is allocated the algorithm searches for a <code>free</code> node that offers enough space for the request. The chosen node is cut in halves until half the node size does not fit the request anymore. Then the node is cut into one <code>full</code> node that fits the request exactly and another <code>free</code> node for the remaining space. No internal fragmentation occurs using this implementation. External fragmentation can happen when partitions are to small to fit allocation requests for a long time. Allocating some relative small chunks of memory helps in keeping the fragmentation costs low.</p>
<p>Addresses are only used relative to the start address within the allocator. If the allocated memory refers to any RAM you have to offset the pre-allocated data pointer with the relative addresses used within this class. </p>

<p class="definition">Definition at line <a class="el" href="../../d9/da6/memory-allocator_8h_source.html#l00291">291</a> of file <a class="el" href="../../d9/da6/memory-allocator_8h_source.html">memory-allocator.h</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a id="a7692775c92e3dd2ab7d5014ad9d40d70" name="a7692775c92e3dd2ab7d5014ad9d40d70"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7692775c92e3dd2ab7d5014ad9d40d70">&#9670;&#160;</a></span>Reference</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef unsigned int <a class="el" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#a7692775c92e3dd2ab7d5014ad9d40d70">regen::BuddyAllocator::Reference</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>the virtual address. </p>

<p class="definition">Definition at line <a class="el" href="../../d9/da6/memory-allocator_8h_source.html#l00296">296</a> of file <a class="el" href="../../d9/da6/memory-allocator_8h_source.html">memory-allocator.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Enumeration Documentation</h2>
<a id="a97157cc161005dcaf678a3b01d86f93b" name="a97157cc161005dcaf678a3b01d86f93b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97157cc161005dcaf678a3b01d86f93b">&#9670;&#160;</a></span>State</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#a97157cc161005dcaf678a3b01d86f93b">regen::BuddyAllocator::State</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The current allocator state. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a97157cc161005dcaf678a3b01d86f93ba97d4280c05c1360e44206f79fd5faf4d" name="a97157cc161005dcaf678a3b01d86f93ba97d4280c05c1360e44206f79fd5faf4d"></a>FREE&#160;</td><td class="fielddoc"><p>no allocate active </p>
</td></tr>
<tr><td class="fieldname"><a id="a97157cc161005dcaf678a3b01d86f93ba22dff73211064bbdda7250aa849d0d2f" name="a97157cc161005dcaf678a3b01d86f93ba22dff73211064bbdda7250aa849d0d2f"></a>FULL&#160;</td><td class="fielddoc"><p>no more allocate possible </p>
</td></tr>
<tr><td class="fieldname"><a id="a97157cc161005dcaf678a3b01d86f93baf36f1719c96cf4a0fd72c251cbc56c50" name="a97157cc161005dcaf678a3b01d86f93baf36f1719c96cf4a0fd72c251cbc56c50"></a>PARTIAL&#160;</td><td class="fielddoc"><p>some allocates active but space left </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../d9/da6/memory-allocator_8h_source.html#l00300">300</a> of file <a class="el" href="../../d9/da6/memory-allocator_8h_source.html">memory-allocator.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  300</span>                   {</div>
<div class="line"><span class="lineno">  301</span>            <a class="code hl_enumvalue" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#a97157cc161005dcaf678a3b01d86f93ba97d4280c05c1360e44206f79fd5faf4d">FREE</a>,  </div>
<div class="line"><span class="lineno">  302</span>            <a class="code hl_enumvalue" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#a97157cc161005dcaf678a3b01d86f93ba22dff73211064bbdda7250aa849d0d2f">FULL</a>,  </div>
<div class="line"><span class="lineno">  303</span>            <a class="code hl_enumvalue" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#a97157cc161005dcaf678a3b01d86f93baf36f1719c96cf4a0fd72c251cbc56c50">PARTIAL</a></div>
<div class="line"><span class="lineno">  304</span>        };</div>
<div class="ttc" id="aclassregen_1_1_buddy_allocator_html_a97157cc161005dcaf678a3b01d86f93ba22dff73211064bbdda7250aa849d0d2f"><div class="ttname"><a href="../../dc/d9a/classregen_1_1_buddy_allocator.html#a97157cc161005dcaf678a3b01d86f93ba22dff73211064bbdda7250aa849d0d2f">regen::BuddyAllocator::FULL</a></div><div class="ttdeci">@ FULL</div><div class="ttdoc">no more allocate possible</div><div class="ttdef"><b>Definition</b> <a href="../../d9/da6/memory-allocator_8h_source.html#l00302">memory-allocator.h:302</a></div></div>
<div class="ttc" id="aclassregen_1_1_buddy_allocator_html_a97157cc161005dcaf678a3b01d86f93ba97d4280c05c1360e44206f79fd5faf4d"><div class="ttname"><a href="../../dc/d9a/classregen_1_1_buddy_allocator.html#a97157cc161005dcaf678a3b01d86f93ba97d4280c05c1360e44206f79fd5faf4d">regen::BuddyAllocator::FREE</a></div><div class="ttdeci">@ FREE</div><div class="ttdoc">no allocate active</div><div class="ttdef"><b>Definition</b> <a href="../../d9/da6/memory-allocator_8h_source.html#l00301">memory-allocator.h:301</a></div></div>
<div class="ttc" id="aclassregen_1_1_buddy_allocator_html_a97157cc161005dcaf678a3b01d86f93baf36f1719c96cf4a0fd72c251cbc56c50"><div class="ttname"><a href="../../dc/d9a/classregen_1_1_buddy_allocator.html#a97157cc161005dcaf678a3b01d86f93baf36f1719c96cf4a0fd72c251cbc56c50">regen::BuddyAllocator::PARTIAL</a></div><div class="ttdeci">@ PARTIAL</div><div class="ttdoc">some allocates active but space left</div><div class="ttdef"><b>Definition</b> <a href="../../d9/da6/memory-allocator_8h_source.html#l00304">memory-allocator.h:303</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a6c188442a57473b0d68c4bd6788095f8" name="a6c188442a57473b0d68c4bd6788095f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c188442a57473b0d68c4bd6788095f8">&#9670;&#160;</a></span>BuddyAllocator()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">BuddyAllocator::BuddyAllocator </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">size</td><td>number of pre-allocated bytes. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d32/memory-allocator_8cpp_source.html#l00023">23</a> of file <a class="el" href="../../d6/d32/memory-allocator_8cpp_source.html">memory-allocator.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   23</span>                                                {</div>
<div class="line"><span class="lineno">   24</span>    <a class="code hl_variable" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#aea58740d2c30ab4411f585e6e7c8d5ca">buddyTree_</a> = <span class="keyword">new</span> BuddyNode(0u, <a class="code hl_function" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#a6f006bdad7365abbb441497962f86eaf">size</a>, <span class="keyword">nullptr</span>);</div>
<div class="line"><span class="lineno">   25</span>}</div>
<div class="ttc" id="aclassregen_1_1_buddy_allocator_html_a6f006bdad7365abbb441497962f86eaf"><div class="ttname"><a href="../../dc/d9a/classregen_1_1_buddy_allocator.html#a6f006bdad7365abbb441497962f86eaf">regen::BuddyAllocator::size</a></div><div class="ttdeci">unsigned int size() const</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d32/memory-allocator_8cpp_source.html#l00036">memory-allocator.cpp:36</a></div></div>
<div class="ttc" id="aclassregen_1_1_buddy_allocator_html_aea58740d2c30ab4411f585e6e7c8d5ca"><div class="ttname"><a href="../../dc/d9a/classregen_1_1_buddy_allocator.html#aea58740d2c30ab4411f585e6e7c8d5ca">regen::BuddyAllocator::buddyTree_</a></div><div class="ttdeci">BuddyNode * buddyTree_</div><div class="ttdef"><b>Definition</b> <a href="../../d9/da6/memory-allocator_8h_source.html#l00363">memory-allocator.h:363</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a607e2bb741be80232456d2cbe9fd4a5a" name="a607e2bb741be80232456d2cbe9fd4a5a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a607e2bb741be80232456d2cbe9fd4a5a">&#9670;&#160;</a></span>~BuddyAllocator()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BuddyAllocator::~BuddyAllocator </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/d32/memory-allocator_8cpp_source.html#l00027">27</a> of file <a class="el" href="../../d6/d32/memory-allocator_8cpp_source.html">memory-allocator.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   27</span>                                {</div>
<div class="line"><span class="lineno">   28</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#aea58740d2c30ab4411f585e6e7c8d5ca">buddyTree_</a>) {</div>
<div class="line"><span class="lineno">   29</span>        <a class="code hl_function" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#a112fe136eaaca51b7fd21d076c8e1322">clear</a>(<a class="code hl_variable" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#aea58740d2c30ab4411f585e6e7c8d5ca">buddyTree_</a>);</div>
<div class="line"><span class="lineno">   30</span>        <a class="code hl_variable" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#aea58740d2c30ab4411f585e6e7c8d5ca">buddyTree_</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">   31</span>    }</div>
<div class="line"><span class="lineno">   32</span>}</div>
<div class="ttc" id="aclassregen_1_1_buddy_allocator_html_a112fe136eaaca51b7fd21d076c8e1322"><div class="ttname"><a href="../../dc/d9a/classregen_1_1_buddy_allocator.html#a112fe136eaaca51b7fd21d076c8e1322">regen::BuddyAllocator::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d32/memory-allocator_8cpp_source.html#l00119">memory-allocator.cpp:119</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a00954d101e33b1b53bc623cf1a4bbd31" name="a00954d101e33b1b53bc623cf1a4bbd31"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00954d101e33b1b53bc623cf1a4bbd31">&#9670;&#160;</a></span>alloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool BuddyAllocator::alloc </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&#160;</td>
          <td class="paramname"><em>addressRet</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Allocate memory managed by the allocator. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">size</td><td>number of bytes to allocate. </td></tr>
    <tr><td class="paramname">addressRet</td><td>relative address of allocated memory </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>false if not enough space left. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d32/memory-allocator_8cpp_source.html#l00090">90</a> of file <a class="el" href="../../d6/d32/memory-allocator_8cpp_source.html">memory-allocator.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   90</span>                                                             {</div>
<div class="line"><span class="lineno">   91</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#aea58740d2c30ab4411f585e6e7c8d5ca">buddyTree_</a>-&gt;<a class="code hl_variable" href="../../dc/d83/structregen_1_1_buddy_allocator_1_1_buddy_node.html#a8e036e96ef28d32f36125a00d0029a7d">maxSpace</a> &lt; <a class="code hl_function" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#a6f006bdad7365abbb441497962f86eaf">size</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">   92</span> </div>
<div class="line"><span class="lineno">   93</span>    BuddyNode *n = <a class="code hl_variable" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#aea58740d2c30ab4411f585e6e7c8d5ca">buddyTree_</a>;</div>
<div class="line"><span class="lineno">   94</span>    <span class="keywordflow">while</span> (1) {</div>
<div class="line"><span class="lineno">   95</span>        <span class="keywordflow">switch</span> (n-&gt;state) {</div>
<div class="line"><span class="lineno">   96</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#a97157cc161005dcaf678a3b01d86f93ba97d4280c05c1360e44206f79fd5faf4d">FREE</a>:</div>
<div class="line"><span class="lineno">   97</span>                <span class="comment">// free node with enough space. Create partitions inside the</span></div>
<div class="line"><span class="lineno">   98</span>                <span class="comment">// node to avoid internal fragmentation.</span></div>
<div class="line"><span class="lineno">   99</span>                *x = <a class="code hl_function" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#a3ec075603df242150ef9b45b4df3bfce">createPartition</a>(n, <a class="code hl_function" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#a6f006bdad7365abbb441497962f86eaf">size</a>);</div>
<div class="line"><span class="lineno">  100</span>                <a class="code hl_function" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#a4033fd89362bb090a16aa7743f209b5d">computeMaxSpace</a>(n);</div>
<div class="line"><span class="lineno">  101</span>                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  102</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#a97157cc161005dcaf678a3b01d86f93baf36f1719c96cf4a0fd72c251cbc56c50">PARTIAL</a>: {</div>
<div class="line"><span class="lineno">  103</span>                <span class="comment">// walk down the tree until we reach a FREE node.</span></div>
<div class="line"><span class="lineno">  104</span>                <span class="keywordtype">int</span> d1 = n-&gt;leftChild-&gt;maxSpace - <a class="code hl_function" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#a6f006bdad7365abbb441497962f86eaf">size</a>;</div>
<div class="line"><span class="lineno">  105</span>                <span class="keywordtype">int</span> d2 = n-&gt;rightChild-&gt;maxSpace - <a class="code hl_function" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#a6f006bdad7365abbb441497962f86eaf">size</a>;</div>
<div class="line"><span class="lineno">  106</span>                <span class="keywordflow">if</span> (d2 &lt; 0 || (d1 &gt;= 0 &amp;&amp; d1 &lt; d2)) { n = n-&gt;leftChild; }</div>
<div class="line"><span class="lineno">  107</span>                <span class="keywordflow">else</span> { n = n-&gt;rightChild; }</div>
<div class="line"><span class="lineno">  108</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  109</span>            }</div>
<div class="line"><span class="lineno">  110</span>            <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  111</span>                <a class="code hl_define" href="../../d5/d77/logging_8h.html#a30354cfa09ee641060424fe510c4e80b">REGEN_ERROR</a>(<span class="stringliteral">&quot;Invalid state &quot;</span> &lt;&lt; n-&gt;state &lt;&lt; <span class="stringliteral">&quot;.&quot;</span>);</div>
<div class="line"><span class="lineno">  112</span>                <a class="code hl_define" href="../../d5/d77/logging_8h.html#ad31594dd0443aa92802e68587bf25a8f">REGEN_ASSERT</a>(0);<span class="comment">//should not be reached</span></div>
<div class="line"><span class="lineno">  113</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  114</span>        }</div>
<div class="line"><span class="lineno">  115</span>    }</div>
<div class="line"><span class="lineno">  116</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  117</span>}</div>
<div class="ttc" id="aclassregen_1_1_buddy_allocator_html_a3ec075603df242150ef9b45b4df3bfce"><div class="ttname"><a href="../../dc/d9a/classregen_1_1_buddy_allocator.html#a3ec075603df242150ef9b45b4df3bfce">regen::BuddyAllocator::createPartition</a></div><div class="ttdeci">unsigned int createPartition(BuddyNode *n, unsigned int size)</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d32/memory-allocator_8cpp_source.html#l00050">memory-allocator.cpp:50</a></div></div>
<div class="ttc" id="aclassregen_1_1_buddy_allocator_html_a4033fd89362bb090a16aa7743f209b5d"><div class="ttname"><a href="../../dc/d9a/classregen_1_1_buddy_allocator.html#a4033fd89362bb090a16aa7743f209b5d">regen::BuddyAllocator::computeMaxSpace</a></div><div class="ttdeci">void computeMaxSpace(BuddyNode *n)</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d32/memory-allocator_8cpp_source.html#l00040">memory-allocator.cpp:40</a></div></div>
<div class="ttc" id="alogging_8h_html_a30354cfa09ee641060424fe510c4e80b"><div class="ttname"><a href="../../d5/d77/logging_8h.html#a30354cfa09ee641060424fe510c4e80b">REGEN_ERROR</a></div><div class="ttdeci">#define REGEN_ERROR(...)</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d77/logging_8h_source.html#l00055">logging.h:55</a></div></div>
<div class="ttc" id="alogging_8h_html_ad31594dd0443aa92802e68587bf25a8f"><div class="ttname"><a href="../../d5/d77/logging_8h.html#ad31594dd0443aa92802e68587bf25a8f">REGEN_ASSERT</a></div><div class="ttdeci">#define REGEN_ASSERT(v)</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d77/logging_8h_source.html#l00072">logging.h:72</a></div></div>
<div class="ttc" id="astructregen_1_1_buddy_allocator_1_1_buddy_node_html_a8e036e96ef28d32f36125a00d0029a7d"><div class="ttname"><a href="../../dc/d83/structregen_1_1_buddy_allocator_1_1_buddy_node.html#a8e036e96ef28d32f36125a00d0029a7d">regen::BuddyAllocator::BuddyNode::maxSpace</a></div><div class="ttdeci">unsigned int maxSpace</div><div class="ttdef"><b>Definition</b> <a href="../../d9/da6/memory-allocator_8h_source.html#l00357">memory-allocator.h:357</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6ca1f1a0ff2c79bb2959d4c548af46f2" name="a6ca1f1a0ff2c79bb2959d4c548af46f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ca1f1a0ff2c79bb2959d4c548af46f2">&#9670;&#160;</a></span>allocaterState()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#a97157cc161005dcaf678a3b01d86f93b">BuddyAllocator::State</a> BuddyAllocator::allocaterState </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>The current allocator state. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d32/memory-allocator_8cpp_source.html#l00034">34</a> of file <a class="el" href="../../d6/d32/memory-allocator_8cpp_source.html">memory-allocator.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   34</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#aea58740d2c30ab4411f585e6e7c8d5ca">buddyTree_</a>-&gt;<a class="code hl_variable" href="../../dc/d83/structregen_1_1_buddy_allocator_1_1_buddy_node.html#a5fb6b76db212d6b90184529417722697">state</a>; }</div>
<div class="ttc" id="astructregen_1_1_buddy_allocator_1_1_buddy_node_html_a5fb6b76db212d6b90184529417722697"><div class="ttname"><a href="../../dc/d83/structregen_1_1_buddy_allocator_1_1_buddy_node.html#a5fb6b76db212d6b90184529417722697">regen::BuddyAllocator::BuddyNode::state</a></div><div class="ttdeci">State state</div><div class="ttdef"><b>Definition</b> <a href="../../d9/da6/memory-allocator_8h_source.html#l00354">memory-allocator.h:354</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a112fe136eaaca51b7fd21d076c8e1322" name="a112fe136eaaca51b7fd21d076c8e1322"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a112fe136eaaca51b7fd21d076c8e1322">&#9670;&#160;</a></span>clear() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BuddyAllocator::clear </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Clear this allocator. The allocator state will be FREE afterwards. </p>

<p class="definition">Definition at line <a class="el" href="../../d6/d32/memory-allocator_8cpp_source.html#l00119">119</a> of file <a class="el" href="../../d6/d32/memory-allocator_8cpp_source.html">memory-allocator.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  119</span>                           {</div>
<div class="line"><span class="lineno">  120</span>    BuddyNode *clearedTree = <span class="keyword">new</span> BuddyNode(0u, <a class="code hl_variable" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#aea58740d2c30ab4411f585e6e7c8d5ca">buddyTree_</a>-&gt;<a class="code hl_variable" href="../../dc/d83/structregen_1_1_buddy_allocator_1_1_buddy_node.html#a1622e37920aba0b5b0e6e9593c9f8387">size</a>, <span class="keyword">nullptr</span>);</div>
<div class="line"><span class="lineno">  121</span>    <a class="code hl_function" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#a112fe136eaaca51b7fd21d076c8e1322">clear</a>(<a class="code hl_variable" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#aea58740d2c30ab4411f585e6e7c8d5ca">buddyTree_</a>);</div>
<div class="line"><span class="lineno">  122</span>    <a class="code hl_variable" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#aea58740d2c30ab4411f585e6e7c8d5ca">buddyTree_</a> = clearedTree;</div>
<div class="line"><span class="lineno">  123</span>}</div>
<div class="ttc" id="astructregen_1_1_buddy_allocator_1_1_buddy_node_html_a1622e37920aba0b5b0e6e9593c9f8387"><div class="ttname"><a href="../../dc/d83/structregen_1_1_buddy_allocator_1_1_buddy_node.html#a1622e37920aba0b5b0e6e9593c9f8387">regen::BuddyAllocator::BuddyNode::size</a></div><div class="ttdeci">unsigned int size</div><div class="ttdef"><b>Definition</b> <a href="../../d9/da6/memory-allocator_8h_source.html#l00356">memory-allocator.h:356</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a87c5b874cf11ba39ebe09f323c566a65" name="a87c5b874cf11ba39ebe09f323c566a65"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87c5b874cf11ba39ebe09f323c566a65">&#9670;&#160;</a></span>clear() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void BuddyAllocator::clear </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d83/structregen_1_1_buddy_allocator_1_1_buddy_node.html">BuddyNode</a> *&#160;</td>
          <td class="paramname"><em>n</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/d32/memory-allocator_8cpp_source.html#l00125">125</a> of file <a class="el" href="../../d6/d32/memory-allocator_8cpp_source.html">memory-allocator.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  125</span>                                       {</div>
<div class="line"><span class="lineno">  126</span>    <span class="keywordflow">if</span> (n-&gt;leftChild) <a class="code hl_function" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#a112fe136eaaca51b7fd21d076c8e1322">clear</a>(n-&gt;leftChild);</div>
<div class="line"><span class="lineno">  127</span>    <span class="keywordflow">if</span> (n-&gt;rightChild) <a class="code hl_function" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#a112fe136eaaca51b7fd21d076c8e1322">clear</a>(n-&gt;rightChild);</div>
<div class="line"><span class="lineno">  128</span>    <span class="keyword">delete</span> n;</div>
<div class="line"><span class="lineno">  129</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a4033fd89362bb090a16aa7743f209b5d" name="a4033fd89362bb090a16aa7743f209b5d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4033fd89362bb090a16aa7743f209b5d">&#9670;&#160;</a></span>computeMaxSpace()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void BuddyAllocator::computeMaxSpace </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d83/structregen_1_1_buddy_allocator_1_1_buddy_node.html">BuddyNode</a> *&#160;</td>
          <td class="paramname"><em>n</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/d32/memory-allocator_8cpp_source.html#l00040">40</a> of file <a class="el" href="../../d6/d32/memory-allocator_8cpp_source.html">memory-allocator.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   40</span>                                                 {</div>
<div class="line"><span class="lineno">   41</span>    <span class="keywordflow">if</span> (n-&gt;leftChild != <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno">   42</span>        n-&gt;maxSpace = std::max(n-&gt;leftChild-&gt;maxSpace, n-&gt;rightChild-&gt;maxSpace);</div>
<div class="line"><span class="lineno">   43</span>    }</div>
<div class="line"><span class="lineno">   44</span>    <span class="comment">// must recompute maxSpace for given node and all parents</span></div>
<div class="line"><span class="lineno">   45</span>    <span class="keywordflow">for</span> (BuddyNode *t = n-&gt;parent; t != <span class="keyword">nullptr</span>; t = t-&gt;parent) {</div>
<div class="line"><span class="lineno">   46</span>        t-&gt;maxSpace = std::max(t-&gt;leftChild-&gt;maxSpace, t-&gt;rightChild-&gt;maxSpace);</div>
<div class="line"><span class="lineno">   47</span>    }</div>
<div class="line"><span class="lineno">   48</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a3ec075603df242150ef9b45b4df3bfce" name="a3ec075603df242150ef9b45b4df3bfce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ec075603df242150ef9b45b4df3bfce">&#9670;&#160;</a></span>createPartition()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int BuddyAllocator::createPartition </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d83/structregen_1_1_buddy_allocator_1_1_buddy_node.html">BuddyNode</a> *&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/d32/memory-allocator_8cpp_source.html#l00050">50</a> of file <a class="el" href="../../d6/d32/memory-allocator_8cpp_source.html">memory-allocator.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   50</span>                                                                            {</div>
<div class="line"><span class="lineno">   51</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#a6f006bdad7365abbb441497962f86eaf">size</a> == n-&gt;size) {</div>
<div class="line"><span class="lineno">   52</span>        <span class="comment">// the buddy node fits perfectly with the requested size.</span></div>
<div class="line"><span class="lineno">   53</span>        <span class="comment">// Just mark the node as full and return the address.</span></div>
<div class="line"><span class="lineno">   54</span>        n-&gt;state = <a class="code hl_enumvalue" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#a97157cc161005dcaf678a3b01d86f93ba22dff73211064bbdda7250aa849d0d2f">FULL</a>;</div>
<div class="line"><span class="lineno">   55</span>        n-&gt;maxSpace = 0;</div>
<div class="line"><span class="lineno">   56</span>        <span class="keywordflow">return</span> n-&gt;address;</div>
<div class="line"><span class="lineno">   57</span>    }</div>
<div class="line"><span class="lineno">   58</span><span class="preprocessor">#ifndef EXACT_BUDDY_ALLOCATION</span></div>
<div class="line"><span class="lineno">   59</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code hl_function" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#a6f006bdad7365abbb441497962f86eaf">size</a>*2 &gt; n-&gt;size) {</div>
<div class="line"><span class="lineno">   60</span>      <span class="comment">// half of the node size is not enough for the requested memory.</span></div>
<div class="line"><span class="lineno">   61</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">   62</span>    <span class="comment">// Create a node that fits exactly with the requested size</span></div>
<div class="line"><span class="lineno">   63</span>    <span class="comment">// and the rest of the node space remains free for allocation.</span></div>
<div class="line"><span class="lineno">   64</span>    <span class="comment">// No intern fragmentation occurs.</span></div>
<div class="line"><span class="lineno">   65</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> size0 = <a class="code hl_function" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#a6f006bdad7365abbb441497962f86eaf">size</a>;</div>
<div class="line"><span class="lineno">   66</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> size1 = n-&gt;size - <a class="code hl_function" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#a6f006bdad7365abbb441497962f86eaf">size</a>;</div>
<div class="line"><span class="lineno">   67</span>    n-&gt;state = <a class="code hl_enumvalue" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#a97157cc161005dcaf678a3b01d86f93baf36f1719c96cf4a0fd72c251cbc56c50">PARTIAL</a>;</div>
<div class="line"><span class="lineno">   68</span>    n-&gt;maxSpace = size1;</div>
<div class="line"><span class="lineno">   69</span>    n-&gt;leftChild = <span class="keyword">new</span> BuddyNode(n-&gt;address, size0, n);</div>
<div class="line"><span class="lineno">   70</span>    n-&gt;leftChild-&gt;state = <a class="code hl_enumvalue" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#a97157cc161005dcaf678a3b01d86f93ba22dff73211064bbdda7250aa849d0d2f">FULL</a>;</div>
<div class="line"><span class="lineno">   71</span>    n-&gt;leftChild-&gt;maxSpace = 0;</div>
<div class="line"><span class="lineno">   72</span>    n-&gt;rightChild = <span class="keyword">new</span> BuddyNode(n-&gt;address + size0, size1, n);</div>
<div class="line"><span class="lineno">   73</span>    <span class="keywordflow">return</span> n-&gt;address;</div>
<div class="line"><span class="lineno">   74</span><span class="preprocessor">#ifndef EXACT_BUDDY_ALLOCATION</span></div>
<div class="line"><span class="lineno">   75</span>    }</div>
<div class="line"><span class="lineno">   76</span>    <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">   77</span>      <span class="comment">// half of the node size is enough for the requested memory.</span></div>
<div class="line"><span class="lineno">   78</span>      <span class="comment">// Split the node with half size and continue for left child.</span></div>
<div class="line"><span class="lineno">   79</span>      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> size0 = n-&gt;size/2;</div>
<div class="line"><span class="lineno">   80</span>      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> size1 = n-&gt;size-size0;</div>
<div class="line"><span class="lineno">   81</span>      n-&gt;state = <a class="code hl_enumvalue" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#a97157cc161005dcaf678a3b01d86f93baf36f1719c96cf4a0fd72c251cbc56c50">PARTIAL</a>;</div>
<div class="line"><span class="lineno">   82</span>      n-&gt;maxSpace = size1;</div>
<div class="line"><span class="lineno">   83</span>      n-&gt;leftChild = <span class="keyword">new</span> BuddyNode(n-&gt;address, size0, n);</div>
<div class="line"><span class="lineno">   84</span>      n-&gt;rightChild = <span class="keyword">new</span> BuddyNode(n-&gt;address+size0, size1, n);</div>
<div class="line"><span class="lineno">   85</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#a3ec075603df242150ef9b45b4df3bfce">createPartition</a>(n-&gt;leftChild, <a class="code hl_function" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#a6f006bdad7365abbb441497962f86eaf">size</a>);</div>
<div class="line"><span class="lineno">   86</span>    }</div>
<div class="line"><span class="lineno">   87</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">   88</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a1059874be41484f7206ae3ec9fdf9682" name="a1059874be41484f7206ae3ec9fdf9682"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1059874be41484f7206ae3ec9fdf9682">&#9670;&#160;</a></span>free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BuddyAllocator::free </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>address</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Free previously allocated memory. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">address</td><td>address of the memory block to free </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d32/memory-allocator_8cpp_source.html#l00131">131</a> of file <a class="el" href="../../d6/d32/memory-allocator_8cpp_source.html">memory-allocator.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  131</span>                                              {</div>
<div class="line"><span class="lineno">  132</span>    <span class="comment">// find the node that allocates given address</span></div>
<div class="line"><span class="lineno">  133</span>    BuddyNode *t = <a class="code hl_variable" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#aea58740d2c30ab4411f585e6e7c8d5ca">buddyTree_</a>;</div>
<div class="line"><span class="lineno">  134</span>    <span class="keywordflow">while</span> (t-&gt;rightChild) {</div>
<div class="line"><span class="lineno">  135</span>        t = (address &gt;= t-&gt;rightChild-&gt;address) ? t-&gt;<a class="code hl_variable" href="../../dc/d83/structregen_1_1_buddy_allocator_1_1_buddy_node.html#af6c19320f6d3c64df12dff5c3a4a818f">rightChild</a> : t-&gt;leftChild;</div>
<div class="line"><span class="lineno">  136</span>    }</div>
<div class="line"><span class="lineno">  137</span> </div>
<div class="line"><span class="lineno">  138</span>    <span class="comment">// mark as free space</span></div>
<div class="line"><span class="lineno">  139</span>    t-&gt;state = <a class="code hl_enumvalue" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#a97157cc161005dcaf678a3b01d86f93ba97d4280c05c1360e44206f79fd5faf4d">FREE</a>;</div>
<div class="line"><span class="lineno">  140</span>    t-&gt;maxSpace = t-&gt;size;</div>
<div class="line"><span class="lineno">  141</span>    <span class="keywordflow">if</span> (t-&gt;leftChild) {</div>
<div class="line"><span class="lineno">  142</span>        <span class="keyword">delete</span> t-&gt;leftChild;</div>
<div class="line"><span class="lineno">  143</span>        t-&gt;leftChild = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  144</span>    }</div>
<div class="line"><span class="lineno">  145</span>    <span class="keywordflow">if</span> (t-&gt;rightChild) {</div>
<div class="line"><span class="lineno">  146</span>        <span class="keyword">delete</span> t-&gt;rightChild;</div>
<div class="line"><span class="lineno">  147</span>        t-&gt;rightChild = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  148</span>    }</div>
<div class="line"><span class="lineno">  149</span>    <span class="comment">// join parents with both childs becoming FREE with this call</span></div>
<div class="line"><span class="lineno">  150</span>    <span class="keywordflow">while</span> (t-&gt;parent) {</div>
<div class="line"><span class="lineno">  151</span>        <span class="keywordflow">if</span> (t-&gt;parent-&gt;leftChild-&gt;state == <a class="code hl_enumvalue" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#a97157cc161005dcaf678a3b01d86f93ba97d4280c05c1360e44206f79fd5faf4d">FREE</a> &amp;&amp;</div>
<div class="line"><span class="lineno">  152</span>            t-&gt;parent-&gt;rightChild-&gt;state == <a class="code hl_enumvalue" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#a97157cc161005dcaf678a3b01d86f93ba97d4280c05c1360e44206f79fd5faf4d">FREE</a>) {</div>
<div class="line"><span class="lineno">  153</span>            t = t-&gt;parent;</div>
<div class="line"><span class="lineno">  154</span>            <span class="keyword">delete</span> t-&gt;leftChild;</div>
<div class="line"><span class="lineno">  155</span>            <span class="keyword">delete</span> t-&gt;rightChild;</div>
<div class="line"><span class="lineno">  156</span>            t-&gt;leftChild = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  157</span>            t-&gt;rightChild = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  158</span>            <span class="comment">// mark as free space</span></div>
<div class="line"><span class="lineno">  159</span>            t-&gt;state = <a class="code hl_enumvalue" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#a97157cc161005dcaf678a3b01d86f93ba97d4280c05c1360e44206f79fd5faf4d">FREE</a>;</div>
<div class="line"><span class="lineno">  160</span>            t-&gt;maxSpace = t-&gt;size;</div>
<div class="line"><span class="lineno">  161</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  162</span>            <a class="code hl_function" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#a4033fd89362bb090a16aa7743f209b5d">computeMaxSpace</a>(t-&gt;parent);</div>
<div class="line"><span class="lineno">  163</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  164</span>        }</div>
<div class="line"><span class="lineno">  165</span>    }</div>
<div class="line"><span class="lineno">  166</span>}</div>
<div class="ttc" id="astructregen_1_1_buddy_allocator_1_1_buddy_node_html_af6c19320f6d3c64df12dff5c3a4a818f"><div class="ttname"><a href="../../dc/d83/structregen_1_1_buddy_allocator_1_1_buddy_node.html#af6c19320f6d3c64df12dff5c3a4a818f">regen::BuddyAllocator::BuddyNode::rightChild</a></div><div class="ttdeci">BuddyNode * rightChild</div><div class="ttdef"><b>Definition</b> <a href="../../d9/da6/memory-allocator_8h_source.html#l00359">memory-allocator.h:359</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab16567c042f955d0d3d2592f37e6d75c" name="ab16567c042f955d0d3d2592f37e6d75c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab16567c042f955d0d3d2592f37e6d75c">&#9670;&#160;</a></span>maxSpace()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int BuddyAllocator::maxSpace </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>maximum contiguous space that can be allocated. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d32/memory-allocator_8cpp_source.html#l00038">38</a> of file <a class="el" href="../../d6/d32/memory-allocator_8cpp_source.html">memory-allocator.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   38</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#aea58740d2c30ab4411f585e6e7c8d5ca">buddyTree_</a>-&gt;<a class="code hl_variable" href="../../dc/d83/structregen_1_1_buddy_allocator_1_1_buddy_node.html#a8e036e96ef28d32f36125a00d0029a7d">maxSpace</a>; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a6f006bdad7365abbb441497962f86eaf" name="a6f006bdad7365abbb441497962f86eaf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f006bdad7365abbb441497962f86eaf">&#9670;&#160;</a></span>size()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int BuddyAllocator::size </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>number of pre-allocated bytes. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d32/memory-allocator_8cpp_source.html#l00036">36</a> of file <a class="el" href="../../d6/d32/memory-allocator_8cpp_source.html">memory-allocator.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   36</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="../../dc/d9a/classregen_1_1_buddy_allocator.html#aea58740d2c30ab4411f585e6e7c8d5ca">buddyTree_</a>-&gt;<a class="code hl_variable" href="../../dc/d83/structregen_1_1_buddy_allocator_1_1_buddy_node.html#a1622e37920aba0b5b0e6e9593c9f8387">size</a>; }</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="aea58740d2c30ab4411f585e6e7c8d5ca" name="aea58740d2c30ab4411f585e6e7c8d5ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea58740d2c30ab4411f585e6e7c8d5ca">&#9670;&#160;</a></span>buddyTree_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dc/d83/structregen_1_1_buddy_allocator_1_1_buddy_node.html">BuddyNode</a>* regen::BuddyAllocator::buddyTree_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/da6/memory-allocator_8h_source.html#l00363">363</a> of file <a class="el" href="../../d9/da6/memory-allocator_8h_source.html">memory-allocator.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/runner/work/regen/regen/regen/utility/<a class="el" href="../../d9/da6/memory-allocator_8h_source.html">memory-allocator.h</a></li>
<li>/home/runner/work/regen/regen/regen/utility/<a class="el" href="../../d6/d32/memory-allocator_8cpp_source.html">memory-allocator.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../d1/dc3/namespaceregen.html">regen</a></li><li class="navelem"><a class="el" href="../../dc/d9a/classregen_1_1_buddy_allocator.html">BuddyAllocator</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
