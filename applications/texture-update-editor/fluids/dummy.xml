<?xml version="1.0" encoding="UTF-8" ?>
<texture-updater
    name="simple draw"
    framerate="60"
    TIMESTEP="0.016666666"
>
    <!-- Named buffers used in fLuid simulation. -->
    <buffers>
        <buffer name="fluid" components="3" count="1"
                pixelType="byte" size="256,256" />
        <buffer name="obstacles" components="4" count="2"
                pixelType="byte" size="256,256" />
        <buffer name="splat" file="res/textures/ogle.png" />
    </buffers>
    
    <!-- Initial splats. -->
    <operation
        fs="fluid.splat.border"
        clearColor="0.0,0.0,0.0,0.0"
        IGNORE_OBSTACLES="1"
        in_splatBorder="1.0"
        in_splatValue="1.0,0.0,0.0,0.0"
        out="obstacles" />
    <operation
        fs="fluid.splat.rect"
        mode="modifyState"
        blend="add"
        IGNORE_OBSTACLES="1"
        in_splatPoint="98.0,168.0"
        in_splatSize="70.0,30.0"
        in_splatValue="0.5,0.0,0.0,0.0"
        out="obstacles" />
    <operation
        fs="fluid.splat.circle"
        mode="modifyState"
        blend="add"
        IGNORE_OBSTACLES="1"
        in_splatPoint="78.0,158.0"
        in_splatRadius="25.0"
        in_splatValue="0.5,0.0,0.0,0.0"
        out="obstacles" />
    <operation
        fs="fluid.splat.tex"
        mode="modifyState"
        blend="add"
        IGNORE_OBSTACLES="1"
        in_splatTexture="splat"
        in_texelFactor="1.0"
        out="obstacles" />
    
    <!-- Pipeline stages are evaluated sequential each frame. -->
    <operations>
        <operation
            fs="fluid.visualize.scalar"
            mode="modifyState"
            blend="alpha"
            clearColor="1.0,1.0,1.0,1.0"
            in_quantity="obstacles"
            in_texelFactor="1.0"
            in_colorPositive="0.8,0.0,0.0"
            in_colorNegative="0.0,0.0,0.0"
            out="fluid" />
        <operation
            fs="fluid.splat.circle"
            mode="modifyState"
            blend="alpha"
            IGNORE_OBSTACLES="1"
            in_splatPoint="53.0,142.0"
            in_splatRadius="28.0"
            in_splatValue="0.0,1.0,0.0,0.5"
            out="fluid" />
        <operation
            fs="fluid.splat.circle"
            mode="modifyState"
            blend="add"
            IGNORE_OBSTACLES="1"
            in_splatPoint="79.0,125.0"
            in_splatRadius="28.0"
            in_splatValue="0.0,0.0,1.0,1.0"
            out="fluid" />
    </operations>
</texture-updater>

